doctype html
html
	head
		include ./head.jade
		script(type="text/javascript").
			function chooseAll(){
				var checkAll = $("input:first").attr("checked");
				if(checkAll){
					for(var i=0;i<$("input").length;i++){
						$("input:eq("+i+")").prop("checked",false);
						$("input:eq("+i+")").attr("checked",false);
					}
				}else{
					for(var i=0;i<$("input").length;i++){
						$("input:eq("+i+")").attr("checked",true);
						$("input:eq("+i+")").prop("checked",true);
					}
				}
			}
			function pitchUp(t){
				if($(t).attr("checked")){
					$(t).prop("checked",false);
					$(t).attr("checked",false);
				}else{
					$(t).prop("checked",true);
					$(t).attr("checked",true);
				}
			}
			function send(){
				var teams = new Array();
				var n=0;
				for(var i=1;i<$("input").length;i++){
					if($("input").eq(i).attr("checked")){
						teams[n++] = $("input").eq(i).attr("data-value");
					}
				}
				$.ajax({
					type:"POST",
					url:"/teams/pick",
					data:{gameId:"#{gameId}",teams:JSON.stringify(teams)},
					success:function(data){
						location.href="/teams?pos=game&gameId="+"#{gameId}"
					}
				})
			}
	body
		include ./navbar.jade
		div.container.text-center
			div.row
				div.col-xs-2
					ul.nav.nav-pills.nav-stacked.text-center
						li
							a.row(href="/teams?pos=game&gameId=#{gameId}")
								p.navbar-font 球队列表
						div.line
						li
							a.row(href="/teams/newTeamAdd?gameId=#{gameId}")
								p.navbar-font 添加新球队
						div.line
						li.active
							a.row(href="/teams/select?gameId=#{gameId}")
								p.navbar-font 添加已有球队
				div.col-xs-10
					div.panel.panel-primary.panel-block
						div.panel-heading
							div.panel-title.title
								p 添加已有球队
						div.panel-body
							table.table.table-hover.table-bordered.horizontal-center
								thead
									tr
										th.text-center
											input(type="checkbox",onchange="chooseAll()")
										th.text-center 队名
										th.text-center 队标
										th.text-center 简介
								tbody
									-each val,key in teamList
										tr
											td.text-center
												p
													input(type="checkbox",onclick="pitchUp(this)",data-value='#{val.id}')
											td.text-center
												p #{val.get("name")}
											td.text-center
												img.team-img(src=val.get("logoUrl"))
											td.text-center.col-xs-3
												p #{val.get('info')}
					div.text-center
						button.btn.btn-primary(onclick="send()") 确定